import"../chunks/DsnmJJEf.js";import"../chunks/DyzAqCDJ.js";import{ax as ee,i as v,av as te,J as q,ay as re,G as ae,az as ie,aA as oe,b as w,f as se,M as A,a as g,H as ne,s as h,I as d,aw as x,a5 as H,N as r,K as l}from"../chunks/Bcz0RvV-.js";import{s as _}from"../chunks/CnrV899X.js";import{p as le,i as R}from"../chunks/Hih84pwi.js";import{e as de,i as pe}from"../chunks/mt1sDw3T.js";import{r as ce,a as me,s as K}from"../chunks/DS_31K9b.js";import{e as ue}from"../chunks/0J_xpCIS.js";import{i as fe}from"../chunks/DLliyxAC.js";import{i as be,a as ye,b as ve,c as he}from"../chunks/Cs8JuRq6.js";function ge(i,m,b){ee(()=>{var o=v(()=>m(i,b?.())||{});if(b&&o?.update){var e=!1,n={};te(()=>{var s=b();q(s),e&&re(n,s)&&(n=s,o.update(s))}),e=!0}if(o?.destroy)return()=>o.destroy()})}function xe(i){const m=JSON.parse(i);return m.data&&(m.data=ve(m.data,he.decoders)),m}function P(i){return HTMLElement.prototype.cloneNode.call(i)}function _e(i,m=()=>{}){const b=async({action:e,result:n,reset:s=!0,invalidateAll:f=!0})=>{n.type==="success"&&(s&&HTMLFormElement.prototype.reset.call(i),f&&await be()),(location.origin+location.pathname===e.origin+e.pathname||n.type==="redirect"||n.type==="error")&&await ye(n)};async function o(e){if((e.submitter?.hasAttribute("formmethod")?e.submitter.formMethod:P(i).method)!=="post")return;e.preventDefault();const s=new URL(e.submitter?.hasAttribute("formaction")?e.submitter.formAction:P(i).action),f=e.submitter?.hasAttribute("formenctype")?e.submitter.formEnctype:P(i).enctype,T=new FormData(i,e.submitter),E=new AbortController;let S=!1;const O=await m({action:s,cancel:()=>S=!0,controller:E,formData:T,formElement:i,submitter:e.submitter})??b;if(S)return;let y;try{const p=new Headers({accept:"application/json","x-sveltekit-action":"true"});f!=="multipart/form-data"&&p.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(f)?f:"application/x-www-form-urlencoded");const L=f==="multipart/form-data"?T:new URLSearchParams(T),F=await fetch(s,{method:"POST",headers:p,cache:"no-store",body:L,signal:E.signal});y=xe(await F.text()),y.type==="error"&&(y.status=F.status)}catch(p){if(p?.name==="AbortError")return;y={type:"error",error:p}}await O({action:s,formData:T,formElement:i,update:p=>b({action:s,result:y,reset:p?.reset,invalidateAll:p?.invalidateAll}),result:y})}return HTMLFormElement.prototype.addEventListener.call(i,"submit",o),{destroy(){HTMLFormElement.prototype.removeEventListener.call(i,"submit",o)}}}var we=w(`<div style="
      position:fixed;
      bottom:1.5rem;
      left:50%;
      transform:translateX(-50%);
      background:#333;
      color:#fff;
      padding:0.75rem 1.25rem;
      border-radius:0.5rem;
      font-size:0.9rem;
      box-shadow:0 2px 6px rgba(0,0,0,0.2);
      z-index:1000;
      transition:opacity .3s ease;
    "> </div>`),Te=w('<form method="POST" action="?/create" style="border:1px solid #eee;padding:1rem;border-radius:.75rem;margin:1rem 0;display:grid;gap:.75rem;"><label><b>Title</b><br/> <input name="title" required style="width:100%;padding:.5rem;border:1px solid #ddd;border-radius:.5rem;"/></label> <label><b>Description</b><br/> <input name="description" style="width:100%;padding:.5rem;border:1px solid #ddd;border-radius:.5rem;"/></label> <div style="display:grid;grid-template-columns:1fr 1fr;gap:1rem;"><label><b>Ingredients</b><br/> <textarea name="ingredients" rows="6" placeholder="One per line" style="width:100%;padding:.5rem;border:1px solid #ddd;border-radius:.5rem;"></textarea></label> <label><b>Instructions</b><br/> <textarea name="instructions" rows="6" placeholder="One step per line" style="width:100%;padding:.5rem;border:1px solid #ddd;border-radius:.5rem;"></textarea></label></div> <button type="submit"> </button></form>'),Ae=w("<p> </p>"),Ee=w('<p style="color:#666;margin:.3rem 0 0;"> </p>'),Se=w('<li style="border:1px solid #eee;border-radius:.75rem;padding:1rem;"><a style="text-decoration:none;color:inherit;"><h3 style="margin:.2rem 0 0;"> </h3> <!> <small style="color:#999;"> </small></a></li>'),Le=w('<ul style="list-style:none;padding:0;margin:1rem 0;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1rem;"></ul>'),ke=w('<!> <div class="container" style="max-width:900px;margin:2rem auto;padding:0 1rem;"><header style="display:flex;align-items:center;gap:1rem;justify-content:space-between;"><h1 style="margin:0;">üç≥ Recipes</h1> <button> </button></header> <form method="GET" style="margin:1rem 0;"><input name="q" placeholder="Search by title or description‚Ä¶" style="width:100%;padding:.6rem .8rem;border:1px solid #ddd;border-radius:.5rem;"/></form> <!> <!></div>',1);function Ie(i,m){ae(m,!1);const b=H();let o=le(m,"data",8),e=H(!1),n=H(!1),s=H(null),f=null;const T=({formElement:a})=>(x(n,!0),async({result:t,update:u})=>{try{t.type==="success"?(x(e,!1),a.reset(),await u(),E("‚úÖ Recipe saved!")):t.type==="failure"&&(console.error("Form error:",t.data),E("‚ùå Error saving recipe."))}finally{x(n,!1)}});function E(a){x(s,a),f&&clearTimeout(f),f=setTimeout(()=>{x(s,null)},2500)}ie(()=>q(o()),()=>{x(b,o().q?`No recipes yet for ‚Äú${o().q}‚Äù. Try adding one!`:"No recipes yet. Try adding one!")}),oe(),fe();var S=ke(),N=se(S);{var O=a=>{var t=we(),u=d(t,!0);l(t),A(()=>_(u,r(s))),g(a,t)};R(N,a=>{r(s)&&a(O)})}var y=h(N,2),p=d(y),L=h(d(p),2),F=d(L,!0);l(L),l(p);var z=h(p,2),j=d(z);ce(j),l(z);var G=h(z,2);{var X=a=>{var t=Te(),u=h(d(t),6),c=d(u,!0);l(u),l(t),ge(t,(k,M)=>_e?.(k,M),()=>T),A(()=>{K(t,"aria-busy",r(n)),u.disabled=r(n),_(c,r(n)?"Saving‚Ä¶":"Save")}),g(a,t)};R(G,a=>{r(e)&&a(X)})}var B=h(G,2);{var Q=a=>{var t=Ae(),u=d(t,!0);l(t),A(()=>_(u,r(b))),g(a,t)},V=a=>{var t=Le();de(t,5,()=>(q(o()),v(()=>o().recipes)),pe,(u,c)=>{var k=Se(),M=d(k),C=d(M),W=d(C,!0);l(C);var J=h(C,2);{var Y=D=>{var I=Ee(),$=d(I,!0);l(I),A(()=>_($,(r(c),v(()=>r(c).description)))),g(D,I)};R(J,D=>{r(c),v(()=>r(c).description)&&D(Y)})}var U=h(J,2),Z=d(U,!0);l(U),l(M),l(k),A(D=>{K(M,"href",(r(c),v(()=>`/recipe/${r(c).id}`))),_(W,(r(c),v(()=>r(c).title))),_(Z,D)},[()=>(r(c),v(()=>new Date(r(c).createdAt).toLocaleDateString()))]),g(u,k)}),l(t),g(a,t)};R(B,a=>{q(o()),v(()=>o().recipes.length===0)?a(Q):a(V,!1)})}l(y),A(()=>{_(F,r(e)?"Close":"Add Recipe"),me(j,(q(o()),v(()=>o().q)))}),ue("click",L,()=>x(e,!r(e))),g(i,S),ne()}export{Ie as component};
